var __test628 = {"data":[{"obj":{"__":{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172"},"c":{"__":{}}},"__":{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172","xabs":607,"yabs":484,"isRootNode":false,"isProgramNode":false}},{"obj":{"__":{"id":"85ba6ff3-f93f-586e-1bca-e356825d8047","nodeType":"Root"},"a":{"__":{}}},"__":{"id":"85ba6ff3-f93f-586e-1bca-e356825d8047","xabs":768,"yabs":515,"isRootNode":true,"isProgramNode":false}},{"obj":{"__":{"id":"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6"},"b":{"__":{}}},"__":{"id":"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6","xabs":821,"yabs":334,"isRootNode":false,"isProgramNode":false}},{"obj":{"__":{"id":"eaf80ac1-10a0-a992-49de-143f30de9c92"},"e":{"__":{}}},"__":{"id":"eaf80ac1-10a0-a992-49de-143f30de9c92","xabs":528,"yabs":599,"isRootNode":false,"isProgramNode":false}},{"obj":{"__":{"id":"010de0ff-788f-d9b8-3c41-53bb5f48e325","nodeType":"Program"},"program3":{"__":{}}},"__":{"id":"010de0ff-788f-d9b8-3c41-53bb5f48e325","xabs":344,"yabs":608,"isRootNode":false,"isProgramNode":true}},{"obj":{"0":{"_id":{},"loadItem":{},"makeNew":{},"staticMembers":{"POLICYNUM":{"0":{}},"AFFIRMEDDATE":{"0":{}},"MOTIONRETURNDATE":{"0":{}},"ATTORNEYNAME":{"0":{}},"_guid":{}},"matterNumber":{},"DJType":{},"title":{},"assignor":{"21061":{"0":{},"1":{}},"21062":{"0":{},"1":{}},"assignorName":{"0":{}},"IMESpecialty2":{"0":{},"1":{}},"IMEDate2":{"0":{},"1":{}},"assignorAddress":{"0":{},"1":{},"2":{},"3":{}},"IMESpecialist2":{"0":{},"1":{}},"INDIVIDUALDEFENDANTDENIAL":{"0":{}},"IMESpecialist2Address":{"0":{},"1":{}},"vendor":{"0":{}},"IMEFileNumber":{"0":{}},"IMESpecialty3":{"0":{},"1":{}},"attempts":{"0":{}},"IMEDate3":{"0":{},"1":{}},"IMESpecialist3":{"0":{},"1":{}},"letterDate":{"0":{},"1":{}},"IMESpecialist3Address":{"0":{},"1":{}},"IMESpecialty1":{"0":{},"1":{}},"IMEDate1":{"0":{},"1":{}},"linkedDoctorArea":{"0":{}},"IMESpecialist1":{"0":{},"1":{}},"defendantName":{},"IMESpecialist1Address":{"0":{},"1":{}},"responseType":{"0":{}},"defaultSummonsServedText":{"0":{}},"_guid":{}},"__":{}},"_id":{"__":{}},"matterNumber":{"__":{}},"DJType":{"__":{}},"title":{"__":{}},"saveElements":{"SAVEDNAMES":{"0":{}},"SAVENAME":{"0":{}},"_guid":{},"__":{}},"staticMembers":{"POLICYNUM":{"0":{}},"LAWOFFICE":{"0":{}},"_guid":{},"AFFIRMEDDATE":{"0":{}},"MOTIONRETURNDATE":{"0":{}},"ATTORNEYNAME":{"0":{}},"SERVER":{"0":{}},"DICN":{"0":{}},"EUOChoice":{"0":{},"1":{}},"__":{}},"loadItem":{"__":{}},"makeNew":{"__":{}},"mailingAffidavits":{"affidavitType":{"0":{},"1":{}},"_guid":{},"hasChild":{"0":{},"1":{},"2":{}},"AMERICANTRANSIT":{"0":{}},"assignorName":{"0":{}},"employeeName":{"0":{}},"mailingDates":{"0":{},"1":{},"2":{}},"attorneyAddress":{"0":{}},"mailings: ":{"0":{}},"attemptDates":{"0":{},"1":{},"2":{}},"__":{}},"assignor":{"21061":{"0":{},"1":{},"2":{},"3":{},"4":{}},"21062":{"0":{},"1":{},"2":{},"3":{},"4":{}},"21063":{"0":{},"1":{},"2":{},"3":{},"4":{}},"assignorName":{"0":{}},"assignorAddress":{"0":{},"1":{},"2":{},"3":{}},"INDIVIDUALDEFENDANTDENIAL":{"0":{}},"attempts":{"0":{}},"assShow":{"0":{}},"EUOChoice":{"0":{},"1":{},"2":{}},"linkedDoctorArea":{"0":{}},"_guid":{},"responseType":{"0":{}},"hpia":{"0":{}},"letterDate":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{}},"attemptDate":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{}},"linkedDoctors":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{},"6":{},"7":{},"8":{},"9":{},"10":{},"11":{},"12":{},"13":{},"14":{},"15":{},"16":{},"17":{},"18":{},"19":{},"20":{},"21":{},"22":{},"23":{},"24":{},"25":{},"26":{},"27":{},"28":{},"29":{},"30":{},"31":{},"32":{}},"defendantName":{"0":{}},"defaultSummonsServedText":{"0":{}},"repAtt":{"0":{}},"repAttAddr":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialty2":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMEDate2":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialist2":{"0":{},"1":{},"2":{},"3":{},"4":{}},"vendor":{"0":{}},"IMESpecialist2Address":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMEFileNumber":{"0":{},"1":{}},"IMESpecialty3":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMEDate3":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialist3":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialty1":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialist3Address":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMEDate1":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialist1":{"0":{},"1":{},"2":{},"3":{},"4":{}},"IMESpecialist1Address":{"0":{},"1":{},"2":{},"3":{},"4":{}},"hasRepresentation":{"0":{}},"DON":{"0":{}},"defendantAttorneyName":{"0":{}},"defendantAttorneyAddress":{"0":{},"1":{},"2":{},"3":{}},"has representation:":{"0":{}},"defendantAttoryName":{"0":{}},"attorneyAddress":{"0":{},"1":{},"2":{},"3":{}},"HASREPRESENTATION":{"0":{}},"answerAttorneyName":{"0":{}},"Cross Motions":{},"motion date:":{"0":{}},"Opposes":{},"assAttorney":{"0":{}},"answerType":{"0":{}},"cross motion type:":{"0":{}},"discontinueAttorneyName":{"0":{}},"specialty1":{"0":{},"1":{},"2":{}},"specialist1":{"0":{},"1":{}},"2106_1":{"0":{},"1":{},"2":{},"3":{}},"specialty2":{"0":{},"1":{},"2":{}},"specialist2":{"0":{},"1":{}},"specialty3":{"0":{},"1":{},"2":{}},"specialist3":{"0":{},"1":{}},"insured":{"0":{}},"DOL":{"0":{}},"claimNumber":{"0":{}},"policyNumber":{"0":{}},"ra":{},"__":{}},"doctor":{"doctorName":{"0":{}},"doctorAddress":{"0":{},"1":{},"2":{},"3":{},"4":{}},"PROVIDERDEFENDANTDENIAL":{"0":{}},"attempts":{"0":{}},"entity":{"0":{}},"_guid":{},"responseType":{"0":{}},"defendantName":{"0":{}},"defaultSummonsServedText":{"0":{}},"hasRepresentation":{"0":{},"hasRepresentation":{}},"verified2":{},"address":{},"verified":{},"defendantAttorneyName":{"0":{}},"defendantAttorneyAddress":{"0":{},"1":{},"2":{},"3":{}},"answerAttorneyName":{"0":{},"1":{}},"attorneyAddress":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{},"6":{},"7":{}},"repAtt":{"0":{}},"repAttAddr":{"0":{},"1":{},"2":{},"3":{},"4":{}},"letterDate":{"0":{},"1":{}},"attemptDate":{"0":{},"1":{}},"has representation:":{},"defendantAttoryName":{"0":{}},"HASREPRESENTATION":{},"Cross Motions":{"0":{}},"motion date:":{"0":{}},"Opposes":{"0":{}},"cross motion type:":{"0":{}},"assAttorney":{"0":{}},"answerType":{"0":{}},"oppose date:":{"0":{}},"defaultAttorneyAddress":{"0":{}},"delete":{},"hasParent":{"0":{}},"__":{}},"_delete":{"__":{}},"americanTransitAffidavits":{"employeeName":{"0":{}},"defendantName":{"0":{}},"mailingDates":{"0":{},"1":{},"2":{}},"attemptDates":{"0":{},"1":{},"2":{}},"hasParent":{"0":{}},"_guid":{},"hasReps":{"0":{}},"PIAttorneyName":{"0":{}},"PIAttorneyAddress":{"0":{},"1":{},"2":{},"3":{}},"assignorName":{"0":{}},"__":{}},"staticNonEuoProvider":{"JTATTORNEYNAME":{"0":{}},"ASSIGNOR":{"0":{}},"PROVIDER":{"0":{}},"ATTEMPTDATE":{"0":{}},"ATTEMPTTIME":{"0":{}},"_guid":{},"EBTCenter":{"0":{},"time":{},"date":{},"center":{},"sysid":{}},"__":{}},"orderToShowCause":{"CURRENTAFFIRMEDDATE":{"0":{}},"_guid":{},"OSCAFFIRMEDDATE":{"0":{}},"CURRENTAFFIRMDATE":{"0":{}},"__":{}},"documentVariables":{"RELEASEDEFENDANT":{"0":{}},"RELEASEMONEY":{"0":{}},"DATE INDEX ISSUED":{"0":{}},"_guid":{},"SERVER":{"0":{}},"ENTRYDATE":{"0":{}},"SETTLEDATE":{"0":{}},"ATTORNEYNAME":{"0":{}},"ATTORNEYADDRESS":{"0":{},"1":{},"2":{},"3":{}},"PARALEGALNAME":{"0":{}},"OSCDATE":{"0":{}},"civilCourtCaseMatterNumber":{"0":{}},"RELEASEDEFATTNAME":{"0":{}},"RELEASEDEFATTADDRESS1":{"0":{}},"RELEASEDEFATTADDRESS2":{"0":{}},"RELEASEDEFATTADDRESS3":{"0":{}},"RELEASEDEFATTADDRESS4":{"0":{}},"DOCTORDEFENDANT":{"0":{}},"PLFATTORNEYNAME":{"0":{}},"NAMEOFPRIOERACTION":{"0":{}},"PRIORINDEXNUM":{"0":{}},"NOFAULTCLAIMSREP":{"0":{}},"ATTORNEYINITIALS":{"0":{}},"PARALEGALINITIALS":{"0":{}},"ATTEMPTDATE":{"0":{}},"ATTEMPTTIME":{"0":{}},"ATTEMPTTIMEPLUS30":{"0":{}},"CLAIMANT":{"0":{}},"DEPONENT":{"0":{}},"DEPOSITIONCENTER":{"0":{}},"DEPOSITIONCENTERADDRESS":{"0":{}},"DEFENDANTCHOICE":{"0":{}},"IFANSWERBEGIN":{"0":{}},"IFNOANSWERBEGIN":{"0":{}},"IFNOANSWEREND":{"0":{}},"CAPSINSURANCECARRIERNAME":{"0":{}},"DATECOMPLETEDDATE":{"0":{}},"DATESERVED":{"0":{}},"SETTLEDATEDEFENDANTS":{"0":{}},"COURTLABEL3":{"0":{}},"COURTLABEL4":{"0":{}},"JUDGMENTDEFENDANTNAME":{"0":{}},"JUDGMENTDATE":{"0":{}},"JUDGMENTDEFENDANTADDRESSSLINE":{"0":{}},"JUDGMENETAMOUNT":{"0":{}},"JUDGMENTDEFENDANT":{"0":{}},"ATTORNEYNAMEATTORNEYS":{"0":{}},"CAPSINSURANCECARRIER595":{"0":{}},"REJECTEDDEFAULTINGDEFENDANT":{"0":{},"1":{},"2":{},"3":{},"4":{},"5":{},"6":{},"7":{}},"DATECOMPLETED":{"0":{}},"TODAYSDATESIGNATURE":{"0":{}},"APPEARINGDEFENDANTWHOFILEDANDANSWERED":{"0":{}},"DEFAULTINGDEFENDANT":{"0":{}},"DEFAULTINGDEFENDANTATTORNEY":{"0":{}},"INSURANCARRIER":{"0":{}},"ALLDEFENDANTNAMES":{"0":{}},"civilMotionReturnDate":{"0":{}},"CIVILAFFIRMEDDATE":{"0":{}},"CIVILATTORNEYNAME":{"0":{}},"INDIVIDUALASSIGNORNAME":{"0":{}},"OSCAFFIRMEDDATE":{"0":{}},"DEFSORATTSBEGIN":{"0":{}},"DEFSORATTSNAME":{"0":{}},"DEFSORATTSADDR":{"0":{}},"DEFSORATTSEND":{"0":{}},"DEFENDANTLISTDEFENDANTS":{"0":{}},"INDIVIDUALASSIGNORADDRESS":{"0":{}},"LOOPBEGIN":{"0":{}},"LETTERDATE":{"0":{}},"LAWOFFICE":{"0":{}},"EUODATE":{"0":{}},"LOOPEND":{"0":{}},"INDIVIDUALASSIGNOR":{"0":{}},"PLFATTORNEY":{"0":{}},"PLFATTORNEYADDRESS1":{"0":{}},"PLFATTORNEYADDRESS2":{"0":{}},"PLFATTORNEYADDRESS3":{"0":{}},"PLFATTORNEYADDRESS4":{"0":{}},"PLFFILENUM":{"0":{}},"SERVEDDATE":{"0":{}},"__":{}},"v2":{"__":{}},"judgmentvars":{"motion submission date":{"0":{}},"order date":{"0":{}},"Hon Judge":{"0":{}},"IAS Part Number":{"0":{}},"_guid":{},"IAS Part":{"0":{}},"__":{}},"stipWithRelease":{"RELEASEDEFENDANT":{"0":{}},"proSeName":{"0":{}},"releaseAmount":{"0":{}},"_guid":{},"__":{}},"method":{"__":{}},"DJFormName":{"__":{}},"impleadDef":{"name":{"0":{}},"c/o":{"0":{}},"street":{"0":{}},"city":{"0":{}},"state":{"0":{}},"zip":{"0":{}},"_guid":{},"PROVIDERDEFENDANTDENIAL":{"0":{}},"entity":{"0":{}},"attempts":{"0":{}},"__":{}},"staticNonEuoAssignor":{"ASSIGNOR":{"0":{}},"ASSATT":{"0":{}},"PROVIDER":{"0":{}},"_guid":{},"PARALEGALNAME":{"0":{}},"__":{}},"staticEUOAffMailing":{"ASSIGNOR":{"0":{}},"PROVIDER":{"0":{}},"PROVATT":{"0":{}},"_guid":{},"PARALEGALNAME":{"0":{}},"__":{}},"nonEuoAssignor":{"servedDate":{"0":{}},"assignorCert":{"0":{}},"assAttCert":{"0":{}},"_guid":{},"__":{}},"EUOAffidavitOfMailing":{"servedDate":{"0":{}},"provCert":{"0":{}},"provAttCert":{"0":{}},"_guid":{},"__":{}},"searcher":{"search":{"0":{}},"_guid":{},"__":{}},"ATCell1c782754-338b-4696-5a88-f81a583abf31":{"assignorName":{"0":{}},"employeeName":{"0":{}},"mailingDates":{"0":{}},"_guid":{},"__":{}},"ATCell5c59d11b-a217-a7e1-e9a4-290c0915e4ad":{"assignorName":{"0":{}},"employeeName":{"0":{}},"mailingDates":{"0":{}},"_guid":{},"__":{}},"defaultContent":{"AFFIRMEDDATE":{"0":{}},"MOTIONRETURNDATE":{"0":{}},"_guid":{},"__":{}},"defendant":{"defendantName":{"0":{}},"responseType":{"0":{}},"defaultSummonsServedText":{"0":{}},"_guid":{},"answerAttorneyName":{"0":{}},"attorneyAddress":{"0":{},"1":{},"2":{},"3":{}},"__":{}},"ATCell43208a3d-1d50-cd9e-9dc1-36d15257e601":{"employeeName":{"0":{}},"assignorName":{"0":{}},"_guid":{},"mailingDates":{"0":{},"1":{}},"attemptDates":{"0":{},"1":{}},"__":{}},"assignorName":{"0":{},"__":{}},"assignorAddress":{"0":{},"1":{},"2":{},"3":{},"__":{}},"INDIVIDUALDEFENDANTDENIAL":{"0":{},"__":{}},"vendor":{"0":{},"__":{}},"IMEFileNumber":{"0":{},"__":{}},"attempts":{"0":{},"__":{}},"linkedDoctorArea":{"0":{},"__":{}},"_guid":{"__":{}},"answerAttorneyName":{"0":{},"__":{}},"verified2":{"__":{}},"bs":{"__":{}},"bs2":{"__":{}},"__":{"id":"fd8e7494-ce71-985e-0a89-38bc610b5d42","__":{}}},"__":{"id":"fd8e7494-ce71-985e-0a89-38bc610b5d42","xabs":62,"yabs":527,"isRootNode":false,"isProgramNode":false}},{"obj":{"__":{"id":"fe8a06a2-0e27-1915-2b24-4ba489200460"},"d":{"__":{}}},"__":{"id":"fe8a06a2-0e27-1915-2b24-4ba489200460","xabs":763,"yabs":742,"isRootNode":false,"isProgramNode":false}},{"obj":{"__":{"id":"09fb542e-b327-c07d-4a1c-d4d9a73e4ab0","nodeType":"Program"},"function2":{"__":{}}},"__":{"id":"09fb542e-b327-c07d-4a1c-d4d9a73e4ab0","xabs":314,"yabs":703,"isRootNode":false,"isProgramNode":true}},{"obj":{"__":{"id":"d570fc0f-81c7-b2bc-22f1-6c0c63afb771","nodeType":"Program"},"function1":{"__":{}}},"__":{"id":"d570fc0f-81c7-b2bc-22f1-6c0c63afb771","xabs":441,"yabs":472,"isRootNode":false,"isProgramNode":true}}],"foreign":{"[\"85ba6ff3-f93f-586e-1bca-e356825d8047\",\"[\\\"a\\\"]\",0]":[{"id":"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6","ptr":"[\"b\"]","index":0}],"[\"85ba6ff3-f93f-586e-1bca-e356825d8047\",\"[\\\"a\\\"]\",1]":[{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172","ptr":"[\"c\"]","index":0}],"[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"matterNumber\\\"]\",0]":[{"id":"d570fc0f-81c7-b2bc-22f1-6c0c63afb771","ptr":"[\"function1\"]","index":0}],"[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"DJType\\\"]\",0]":[{"id":"010de0ff-788f-d9b8-3c41-53bb5f48e325","ptr":"[\"program3\"]","index":0}],"[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"title\\\"]\",0]":[{"id":"09fb542e-b327-c07d-4a1c-d4d9a73e4ab0","ptr":"[\"function2\"]","index":0}],"[\"010de0ff-788f-d9b8-3c41-53bb5f48e325\",\"[\\\"program3\\\"]\",0]":[{"id":"eaf80ac1-10a0-a992-49de-143f30de9c92","ptr":"[\"e\"]","index":0}],"[\"eaf80ac1-10a0-a992-49de-143f30de9c92\",\"[\\\"e\\\"]\",0]":[{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172","ptr":"[\"c\"]","index":0}],"[\"09fb542e-b327-c07d-4a1c-d4d9a73e4ab0\",\"[\\\"function2\\\"]\",0]":[{"id":"fe8a06a2-0e27-1915-2b24-4ba489200460","ptr":"[\"d\"]","index":0}],"[\"fe8a06a2-0e27-1915-2b24-4ba489200460\",\"[\\\"d\\\"]\",0]":[{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172","ptr":"[\"c\"]","index":1}],"[\"d570fc0f-81c7-b2bc-22f1-6c0c63afb771\",\"[\\\"function1\\\"]\",0]":[{"id":"0b7a1f70-3f93-aade-b95a-8517d223f172","ptr":"[\"c\"]","index":1}],"[\"0b7a1f70-3f93-aade-b95a-8517d223f172\",\"[\\\"c\\\"]\",0]":[],"[\"0b7a1f70-3f93-aade-b95a-8517d223f172\",\"[\\\"c\\\"]\",1]":[{"id":"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6","ptr":"[\"b\"]","index":0}],"[\"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6\",\"[\\\"b\\\"]\",0]":[]},"type":"serializing","alias":"neighborExampleA","timestamp":1344889653,"_id":{"str":"50296334c520d55538000002"}}; 

if ( typeof console === typeof undefined ) {
    console = {};
    console.log = print;
}

s2o = function(e) {
    var x = JSON.parse(e);
    return {
        id : x[0],
        ptr : x[1],
        index : x[2]
    }   
}




// program type "root" added

// BEGIN CODE COPIED FROM CYCLES.JS 
myforeignstring = function(e) {
    return JSON.stringify ( [e.id , e.ptr , e.index ] ); 
}
// END CODE COPIED FROM CYCLES.JS 


//var directedGraph ={
//    "[\"0b7a1f70-3f93-aade-b95a-8517d223f172\",\"[\\\"c\\\"]\",0]": [{
//        "id": "85ba6ff3-f93f-586e-1bca-e356825d8047",
//        "ptr": "[\"a\"]",
//        "index": 1
//    }, {
//        "id": "eaf80ac1-10a0-a992-49de-143f30de9c92",
//        "ptr": "[\"e\"]",
//        "index": 0
//    }],
//    "[\"85ba6ff3-f93f-586e-1bca-e356825d8047\",\"[\\\"a\\\"]\",1]": [{
//        "id": "0b7a1f70-3f93-aade-b95a-8517d223f172",
//        "ptr": "[\"c\"]",
//        "index": 0
//    }],
//    "[\"0b7a1f70-3f93-aade-b95a-8517d223f172\",\"[\\\"c\\\"]\",1]": [{
//        "id": "cf269a5f-7dd5-0a32-49b1-a6e427ed21d6",
//        "ptr": "[\"b\"]",
//        "index": 0
//    }, {
//        "id": "fe8a06a2-0e27-1915-2b24-4ba489200460",
//        "ptr": "[\"d\"]",
//        "index": 0
//    }, {
//        "id": "d570fc0f-81c7-b2bc-22f1-6c0c63afb771",
//        "ptr": "[\"function1\"]",
//        "index": 0
//    }],
//    "[\"cf269a5f-7dd5-0a32-49b1-a6e427ed21d6\",\"[\\\"b\\\"]\",0]": [{
//        "id": "0b7a1f70-3f93-aade-b95a-8517d223f172",
//        "ptr": "[\"c\"]",
//        "index": 1
//    }, {
//        "id": "85ba6ff3-f93f-586e-1bca-e356825d8047",
//        "ptr": "[\"a\"]",
//        "index": 0
//    }],
//    "[\"85ba6ff3-f93f-586e-1bca-e356825d8047\",\"[\\\"a\\\"]\",0]": [{
//        "id": "cf269a5f-7dd5-0a32-49b1-a6e427ed21d6",
//        "ptr": "[\"b\"]",
//        "index": 0
//    }],
//    "[\"eaf80ac1-10a0-a992-49de-143f30de9c92\",\"[\\\"e\\\"]\",0]": [{
//        "id": "0b7a1f70-3f93-aade-b95a-8517d223f172",
//        "ptr": "[\"c\"]",
//        "index": 0
//    }, {
//        "id": "010de0ff-788f-d9b8-3c41-53bb5f48e325",
//        "ptr": "[\"program3\"]",
//        "index": 0
//    }],
//    "[\"010de0ff-788f-d9b8-3c41-53bb5f48e325\",\"[\\\"program3\\\"]\",0]": [{
//        "id": "eaf80ac1-10a0-a992-49de-143f30de9c92",
//        "ptr": "[\"e\"]",
//        "index": 0
//    }, {
//        "id": "fd8e7494-ce71-985e-0a89-38bc610b5d42",
//        "ptr": "[\"DJType\"]",
//        "index": 0
//    }],
//    "[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"DJType\\\"]\",0]": [{
//        "id": "010de0ff-788f-d9b8-3c41-53bb5f48e325",
//        "ptr": "[\"program3\"]",
//        "index": 0
//    }],
//    "[\"fe8a06a2-0e27-1915-2b24-4ba489200460\",\"[\\\"d\\\"]\",0]": [{
//        "id": "0b7a1f70-3f93-aade-b95a-8517d223f172",
//        "ptr": "[\"c\"]",
//        "index": 1
//    }, {
//        "id": "09fb542e-b327-c07d-4a1c-d4d9a73e4ab0",
//        "ptr": "[\"function2\"]",
//        "index": 0
//    }],
//    "[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"title\\\"]\",0]": [{
//        "id": "09fb542e-b327-c07d-4a1c-d4d9a73e4ab0",
//        "ptr": "[\"function2\"]",
//        "index": 0
//    }],
//    "[\"09fb542e-b327-c07d-4a1c-d4d9a73e4ab0\",\"[\\\"function2\\\"]\",0]": [{
//        "id": "fd8e7494-ce71-985e-0a89-38bc610b5d42",
//        "ptr": "[\"title\"]",
//        "index": 0
//    }, {
//        "id": "fe8a06a2-0e27-1915-2b24-4ba489200460",
//        "ptr": "[\"d\"]",
//        "index": 0
//    }],
//    "[\"fd8e7494-ce71-985e-0a89-38bc610b5d42\",\"[\\\"matterNumber\\\"]\",0]": [{
//        "id": "d570fc0f-81c7-b2bc-22f1-6c0c63afb771",
//        "ptr": "[\"function1\"]",
//        "index": 0
//    }],
//    "[\"d570fc0f-81c7-b2bc-22f1-6c0c63afb771\",\"[\\\"function1\\\"]\",0]": [{
//        "id": "fd8e7494-ce71-985e-0a89-38bc610b5d42",
//        "ptr": "[\"matterNumber\"]",
//        "index": 0
//    }, {
//        "id": "0b7a1f70-3f93-aade-b95a-8517d223f172",
//        "ptr": "[\"c\"]",
//        "index": 1
//    }]
//}; 
var ind = [];

ind.push([
	{ptr:'\[\"a\"\]', type:"root", id:''},
	{type:"normal", ptr:'\[\"b\"\]', id:''},
	{ptr:'[\"c\"]', id:"", type:"normal"},
	{ptr:'\[\"d\"\]', id:"", type:"normal"},
	{ptr:'\[\"function2\"\]', type:"program", id:""}, 
	{ptr:'\[\"title\"\]', id:"", type:'aggregateCaseObj'}
]);

ind.push([
	{ptr:'\[\"a\"\]', type:"root", id:''},
	{type:"normal", ptr:'\[\"b\"\]', id:''},
	{ptr:'[\"c\"]', id:"", type:"normal"}, 
	{ptr:'\[\"function1\"\]', type:"program", id:""},
	{ptr:'\[\"matterNumber\"\]', type:'aggregateCaseObj', id:""}
]);


ind.push([
	{ptr:'\[\"a\"\]', type:"root", id:''},
	{type:"normal", ptr:'\[\"b\"\]', id:''},
	{ptr:'[\"c\"]', id:"", type:"normal"},
	{ptr:'[\"e"]', id:"", type:"normal"},
	{ptr:'\[\"program3\"\]', type:'program', id:""},
	{ptr:'\[\"DJType\"\]', type:'aggregateCaseObj', id:""}
]);

for ( var i = 0; i < ind.length ; i++ ) {
	for ( var j in ind[i] ) {
		//console.log(ind[i][j].type);
	}
}


function getRootNodesFromDG (dg, types) {
    var rcstrs = [];
    for ( var x in dg ) {
        for ( var y in dg[x]) {
            if ( "root" === types[dg[x][y].id]) {
                rcstrs.push(myforeignstring(dg[x][y]));
            }
        }
    }
    return rcstrs;
}




tree_contains = function (visited, contains) {
	if ( typeof visited === typeof [] && visited.indexOf(contains) != -1) {
		return true;
	}

	for ( var i = 0; i < visited.length; i++ ) {
		if ( typeof visited[i] === typeof [] ) {
			//for ( var j in visited[i] ) {
			var rc = tree_contains(visited[i], contains)
				if (rc === true) {
					return true;
				}
			//}
		}
	}
	return false;
}

rootfollow = [];

// we *know* when this graph is cycle free
gdfs = function( graph, current, visited) {
	var curstr = current;
	visited.push(curstr);


    // one links back to origin, one forward
    //console.log(curstr);
	if ( graph[curstr].length <= 2 ) {
        for ( var x in graph[curstr] ) {
            var next = graph[curstr][x];
            if ( ! tree_contains(visited, next) ) {
                visited = gdfs(graph, next, visited);
            }
        }

	} else {
        for ( var x in graph[curstr] ) {
            var next = graph[curstr][x];
		    if ( rootfollow.indexOf(current) == -1) {
                rootfollow.push( current);
            }
        }
	}
	return visited;
}

function assert (e ) {
	if(!e) {
		console.log("NO");
	}	
}

function tree_contains_test() {
	assert ( tree_contains([1,2,3,4], 4));
	assert (! tree_contains([1,2,3,4], 5));
	assert ( tree_contains([1,2,3,[4]], 3));
	assert ( tree_contains([1,2,3,[4]], 4));
	assert ( tree_contains([1,2,3,[4,5]], 5));
	assert ( tree_contains([1,2,3,[[4],[5]]], 4));
	assert ( tree_contains([1,2,3,[[4],[5]]], 5));
}


tree_contains_test();

// prune all nodes from "visited", except rootfollow
// visited is array of arrays
function prunenodes ( graph, visited) {

    var vv = [];
    for ( var x in visited ) {
        for ( var y in visited[x]) {
            if ( vv.indexOf(visited[x][y]) === -1 && rootfollow.indexOf(visited[x][y]) === -1 ) {
                vv.push(visited[x][y]);
            }
        }
    }

    //console.log("XXXXXXXXX");
    //console.log(JSON.stringify(vv));
    //console.log("XXXXXXXXX");

    var newgraph = {};
    for ( var i in graph ) {
        if ( vv.indexOf(i) == -1 ) {
            newgraph[i] = [];
        } else {
            //console.log("Else: " + i + vv.indexOf(i));
        }
    }


    for ( var x in newgraph ) {
        for ( var y in graph[x] ) {
            if ( vv.indexOf(graph[x][y]) === -1) {
                //console.log("push(" + graph[x][y]);
                newgraph[x].push(graph[x][y]);
            }
        }

    }
    //console.log("----------");
    //console.log(JSON.stringify(graph));
    //console.log("----------");
    //console.log("newgraph");
    //console.log(JSON.stringify(newgraph));
    //console.log("----------");


    return newgraph;

}

function process_rest(graphNG, types) {
    var rss = [];
    var backup;
    for ( var i in graphNG ) {
        if ( ( types[s2o(i).id] === "normal" ||  types[s2o(i).id] === "program" ) && graphNG[i].length %2 === 1 ) {
            console.log("CANDIDATE: " + i);
            rss.push(i);
        } // alternative: find nodes that only have outgoing links
	  // but this doesnt work in an undirected graph
        //else if ( types[s2o(i).id] === "normal" ||  types[s2o(i).id] === "program" ) {
	//	backup = i;
	//} else {
	//	console.log("weird: " );
        //	console.log(types[s2o(i).id]);
	//	console.log(i);
	//}
    }
    if ( rss.length === 0 ) {
    	console.log("No root candidates, picking any normal node: " + backup);
	rss.push(backup);
    }
    return iterate ( graphNG, rss, types );
}

function path_reunion (fullgraph, paths ) {
	var rcpaths = [];
	for ( var i=0 ; i < paths.length; i++ ) {
		// which nodes are not part of the path?
		var counter = 0,
		    candidate;
		console.log('I am not 100% sure this works :-)');
		for ( var x in fullgraph[paths[i][0]]) {
			if ( paths[i].indexOf(fullgraph[paths[i][0]][x]) === -1 ) {
				candidate = fullgraph[paths[i][0]][x];
				counter++;
			}
		}
		if ( counter > 1 ) {
			console.log("This shouldnt happen, check here");
		}
		rcpaths.push( [candidate].concat(paths[i]) );
	}
	return rcpaths;
}


function iterate(graph, rootstrs, types ) {
	//console.log("iterating root boxes");
	// for all root boxes
    var allvisited = [];
	for ( var i = 0; i < rootstrs.length ; i++ ) {
        //console.log("rootstrs[i]");
        //console.log(rootstrs[i]);
        for ( var j = 0; j < graph[rootstrs[i]].length ; j++ ) {
            //console.log("\nRoot:");
            var visited = [rootstrs[i]];
            visited = gdfs(graph, graph[rootstrs[i]][j], visited );
            for ( var yy = 0; yy < visited.length ; yy++) {
                //console.log(visited[yy]);
            }
        }
        allvisited.push(visited);
	}

    var graphNG = prunenodes(graph, allvisited);
    var rf = rootfollow;
    rootfollow = [];
    if ( rf.length > 0 ) {
        allvisited = allvisited.concat(iterate(graphNG, rf, types));
    } else if ( JSON.stringify(graphNG).length > JSON.stringify("{}").length ) {
        // we should pick nodes which are -endpoints- (not aggregators, number of neighbors uneven
	// needs to be "reconnected"
	//console.log("Where do we connect??");
	// "normal" node returns first, hence we look for those neighbors
	// that node will be an endpoint of an old path

        var lastpaths = process_rest(graphNG, types);
	var paths_reunited = path_reunion (graph, lastpaths );
	console.log("--LP---");
	console.log(lastpaths);
	console.log("--RU---");
	console.log(paths_reunited);
	console.log("-------");
        allvisited = allvisited.concat(paths_reunited);
    }
    return allvisited;
}

// reassembling paths root -- aggregateobj
function path_flatten ( paths, types ) {
	var paths_flattened = [];
	var prefixes = [];
	var suffixes = [];
	var stuck_in_the_middle_with_you = [];
	for ( var p in paths ) {
		// if end == aggregateCaseObj and begin === root => good
		if ( types[s2o(paths[p][paths[p].length-1]).id] === "aggregateCaseObj" &&
		     types[s2o(paths[p][0]).id] === "root" ) {
			paths_flattened.push(paths[p]);
		} else {
		     	if ( types[s2o(paths[p][0]).id] === "root" ) {
				prefixes.push(paths[p]);
			} else if( types[s2o(paths[p][paths[p].length-1]).id] === "aggregateCaseObj" ) {
				suffixes.push(paths[p]);	
			} else {
				stuck_in_the_middle_with_you.push(paths[p]);
			}
		}
	}
	if ( stuck_in_the_middle_with_you.length.length > 0 ) {
		console.log("There might be a problem here... sitmwy is not tested");
	}

	// sticking prefix and suffixes together
	console.log("va. prefix");
	for ( var x in prefixes ) {
		for ( var y in suffixes ) {
			console.log("Comparing:");
			if ( prefixes[x][prefixes[x].length-1] === suffixes[y][0] ) {
				var xx = prefixes[x].concat(suffixes[y].splice( 1, suffixes[y].length-1 ));
				paths_flattened.push(xx);
			}
		}
	}
	console.log("---");
	console.log(paths_flattened);
	console.log("---");
	return paths_flattened;
}

function dgraph_dgraphprime(dgraph) {
    var dgraphPrime = {}; 
    for ( var i in dgraph) {
        dgraphPrime[i] = []; 
        for ( var j in dgraph[i] ) { 
            dgraphPrime[i].push(myforeignstring(dgraph[i][j]));
        }   
    }   
    return dgraphPrime;
}

if ( typeof exports != typeof undefined ) {
	exports.dgraph_dgraphprime = dgraph_dgraphprime;
	exports.getRootNodesFromDG = getRootNodesFromDG;
	exports.iterate = iterate;
	exports.path_flatten = path_flatten;
}

//var dgprimecmp = dgraph_dgraphprime(__test628);
//var dgprime = dgraph_dgraphprime(directedGraph);

//console.log("------");
//console.log(JSON.stringify(dgprimecmp));
//console.log("------");
//console.log(JSON.stringify(dgprime));
//console.log("------");


//var rootstrs = getRootNodesFromDG(dgprime, types);
//var vvv = iterate(dgprime, rootstrs);

